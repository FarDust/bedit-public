<div class="jumbotron">
  <div class="row">
    <h2>Crear nueva publicaci√≥n</h2>
    <%= form_for(:post, url: posts_path(), class: "form-horizontal") do |f| %>
      <div class="form-group">
        <%= f.label(:foro) %><br />
        <%= f.collection_select(:category, Category.all, :id, :name, {prompt: "--Select a forum--",
                                                                      class: "custom-select"}) %>
      </div>
      <div class="form-group">
        <%= f.label(:titulo) %><br />
        <%= f.text_field(:title, class: "form-control") %>
      </div>
      <div class="form-group">
        <%= f.label(:contenido) %>
        &nbsp;
        <a href="https://github.com/google/styleguide/blob/gh-pages/docguide/style.md" class="badge">
            Markdown style reference
        </a>
        <br/>
        <%= f.text_area(:content, rows: 8, placeholder: "Write your content...",
                                  class: "form-control", style: "resize: none;") %>
      </div>

      <div class="actions">
        <%= f.submit("Publicar", class: "btn btn-primary active") %>
        &nbsp;
        <span href="#" id="uploader" ></span>
      </div>
    <% end %>
  </div>
</div>

<script type="text/javascript">
  $('#uploader').cloudinary_upload_widget(
    { cloud_name: 'hctj9u4ot', upload_preset: 'commentary',
      cropping: 'server', folder: 'commentaries', theme: 'minimal',
      button_class: "btn btn-default", max_image_width: 400, max_image_height: 400},
    function(error, result) {
      $('#post_content')[0].value += '![](' +  result["0"]['secure_url'] + ') '
     });
</script>
