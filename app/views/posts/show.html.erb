<h3><%= @post.title %></h3>

<div class="jumbotron" onload="render();">
  <div class="row">
    <!-- Mostrar el contenido del post -->
    <h3><%=markdown(@post.content) %></h3>
    <h5>
      <div class="badge"> 
        <div class="glyphicon glyphicon-eye-open"></div><%= Favourite.where(post: Post.find(@post.id), isSubcribe: true).length %>
      </div>
      Creado el: <%= @post.created_at %>
    </h5>
  </div>
</div>

<%= render(@comentarios) %>

<%if user_signed_in?()%>
  <div class="jumbotron">
    <div class="row">
      <h2>Comentar</h2>
      <%= form_for(:commentary, url: commentaries_path(), class: "form-horizontal") do |f| %>
        <!-- Enviar escondido el id del post y del usuario -->
        <%= hidden_field_tag "commentary[post_id]", "#{@post.id}" %>
        <%= hidden_field_tag "commentary[user_id]", current_user.id %>
        <div class="form-group">
          <%= f.label("Comenta aqui: ") %><br />
          <%= f.text_area(:text, rows: 15, placeholder: "Escribe tu comentario aqui...", class: "form-control") %>
        </div>

      <div class="actions">
          <%= f.submit("Crear", class: "btn btn-primary active") %>
        </div>
      <% end %>
    </div>
  </div>
<%end%>

<script>
  function render() {
      if (window.location !== window.top.location) {
          window.top.location = window.location;
      }
  };
</script>