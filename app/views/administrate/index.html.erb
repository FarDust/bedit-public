<% if current_user.has_role?(:admin) %>
  <h1>Solicitudes de moderación</h1>
  <div class="jumbotron">
    <div class="row">
      <table class="table">
        <thead>
          <tr>
            <th scope="col">Usuario</th>
            <th scope="col">Categoría</th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          <% Administrate.all.each do |r| %>
            <tr>
              <td><%= r.user %></td>
              <td><%= Category.find(r.category).name %></td>
              <td>
                <%= form_for(:administrate, url: administrate_approve_path(),
                             class: "form-horizontal") do |f| %>
                  <div class="form-group">
                    <%= f.hidden_field(:user, value: r.user, class: "form-control") %>
                    <%= f.hidden_field(:id, value: r.category, class: "form-control") %>
                  </div>
                  <div class="actions">
                    <%= f.submit("Aceptar", class: "btn btn-success") %>
                  </div>
                <% end %>
                <%= form_for(:administrate, url: administrate_refuse_path(),
                             class: "form-horizontal") do |f| %>
                  <%= f.hidden_field(:user, value: r.user, class: "form-control") %>
                  <%= f.hidden_field(:id, value: r.category, class: "form-control") %>
                  <div class="actions">
                    <%= f.submit("Rechazar", class: "btn btn-danger") %>
                  </div>
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
<% else %>
<div class="alert alert-warning" role="alert">
  Solo puedes acceder a esta página si eres administrador
</div>
<% end %>
